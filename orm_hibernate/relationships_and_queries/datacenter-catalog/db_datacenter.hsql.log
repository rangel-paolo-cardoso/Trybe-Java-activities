/*C3*/SET SCHEMA PUBLIC
drop table if exists Application cascade 
drop table if exists Datacenter cascade 
drop table if exists relationship_application_server cascade 
drop table if exists Server cascade 
create table Application (id bigint generated by default as identity (start with 1), description varchar(255), name varchar(255), primary key (id))
create table Datacenter (id bigint generated by default as identity (start with 1), location varchar(255), name varchar(255), primary key (id))
create table relationship_application_server (application_id bigint not null, server_id bigint not null, primary key (application_id, server_id))
create table Server (datacenter_id bigint, id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
alter table relationship_application_server add constraint FK6r412wonpufw985cqwv7fvi2d foreign key (application_id) references Application
alter table relationship_application_server add constraint FK797pjpc130f6x9coiruq9ocqp foreign key (server_id) references Server
alter table Server add constraint FK1ys57251odn1s77ttgtvjsvgk foreign key (datacenter_id) references Datacenter
INSERT INTO DATACENTER VALUES(1,'Brasilia','Cerrado')
INSERT INTO SERVER VALUES(1,1,'LoboGuara')
INSERT INTO APPLICATION VALUES(1,'Python','Agro Techfields')
INSERT INTO APPLICATION VALUES(2,'Javascript','Trybe Course')
INSERT INTO APPLICATION VALUES(3,'Java','FutuereH')
INSERT INTO SERVER VALUES(1,2,'Ariranha')
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(1,1)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(2,1)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(3,1)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(1,2)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(2,2)
COMMIT
INSERT INTO DATACENTER VALUES(2,'S\u00e3o Paulo','Mata Atl\u00e2ntica')
INSERT INTO SERVER VALUES(2,3,'Tamandu\u00e1 Bandeira')
INSERT INTO SERVER VALUES(2,4,'Jaguatirica')
COMMIT
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(2,3)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(1,4)
INSERT INTO RELATIONSHIP_APPLICATION_SERVER VALUES(3,4)
COMMIT
INSERT INTO SERVER VALUES(NULL,5,'Test')
COMMIT
DELETE FROM SERVER WHERE ID=5
COMMIT
INSERT INTO APPLICATION VALUES(4,NULL,'Test')
COMMIT
DELETE FROM APPLICATION WHERE ID=4
COMMIT
INSERT INTO DATACENTER VALUES(3,NULL,'Test')
COMMIT
DELETE FROM DATACENTER WHERE ID=3
COMMIT
